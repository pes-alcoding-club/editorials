<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Alcoding Club | Editorials</title><link rel="stylesheet" href="https://bootswatch.com/4/lux/bootstrap.min.css"/><link rel="shortcut icon" href="/favicon.ico"/><link rel="preload" href="/editorials/_next/static/css/5b392630e742cc857810.css" as="style"/><link rel="stylesheet" href="/editorials/_next/static/css/5b392630e742cc857810.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/editorials/_next/static/chunks/main-79d6d556cd81f503698e.js" as="script"/><link rel="preload" href="/editorials/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/editorials/_next/static/chunks/framework.cb05d56be993eb6b088a.js" as="script"/><link rel="preload" href="/editorials/_next/static/chunks/3ef630e34cd10ba68f9d468ac363ff81c534e1e9.433bb325642694f7dbf6.js" as="script"/><link rel="preload" href="/editorials/_next/static/chunks/pages/_app-20fc78410fa93af4c468.js" as="script"/><link rel="preload" href="/editorials/_next/static/chunks/pages/problems/%5Bid%5D-2c981d2814853e706423.js" as="script"/></head><body><div id="__next"><div><nav class="navbar navbar-expand-lg navbar-light bg-light"><a class="nav-link" href="/editorials/"><img src="/editorials/logo.jpg" width="80" height="70" alt="the alcoding club logo"/></a><a class="navbar-brand" href="#">Editorials</a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor03" aria-controls="navbarColor03" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarColor03"><ul class="navbar-nav mr-auto"><li class="nav-item active"><a class="nav-link" href="/editorials/">Home <span class="sr-only">(current)</span></a></li></ul></div></nav><div class="container"><button type="button" class="btn btn-link editorial-link"><a href="https://www.hackerrank.com/contests/alcoding-september-challenge/challenges/kingdom-cities" target="_blank">View Problem</a></button><div class="jumbotron"><div><p>For the first subtask, all we had to do is use DFS to check how many places can be visited by the given city after adding the roads.
For each query of type 2, it would take O(N) time complexity.
For Q queries, the total time complexity would be O(NQ) which fits the given constraints.</p>
<p>For the second subtask, we need a faster solution. For this, we would use a structure called DSU or disjoint set union.
For queries of type 1, we would <code>merge</code> (or in other words apply the <code>union</code>) the two cities. This takes O(logN) time complexity for each query.</p>
<p>As for query 2, we need another data structure within our DSU which stores the size (or in this case, the number of cities we can visit) for each set (or in this case, city).
If we do this, we can reduce the time taken to retrieve the size to just O(1).</p>
<p>For Q queries our worst case time complexity would be just O(Q log N).</p>
</div></div><ul class="nav nav-tabs"><li class="nav-item"><a class="nav-link " data-toggle="tab">C++</a></li></ul><pre style="display:block;overflow-x:auto;padding:0.5em;background:#F0F0F0;color:#444"><code style="float:left;padding-right:10px"><span class="react-syntax-highlighter-line-number">1
</span></code><code></code></pre></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"editorialData":{"editorial":"\u003cp\u003eFor the first subtask, all we had to do is use DFS to check how many places can be visited by the given city after adding the roads.\nFor each query of type 2, it would take O(N) time complexity.\nFor Q queries, the total time complexity would be O(NQ) which fits the given constraints.\u003c/p\u003e\n\u003cp\u003eFor the second subtask, we need a faster solution. For this, we would use a structure called DSU or disjoint set union.\nFor queries of type 1, we would \u003ccode\u003emerge\u003c/code\u003e (or in other words apply the \u003ccode\u003eunion\u003c/code\u003e) the two cities. This takes O(logN) time complexity for each query.\u003c/p\u003e\n\u003cp\u003eAs for query 2, we need another data structure within our DSU which stores the size (or in this case, the number of cities we can visit) for each set (or in this case, city).\nIf we do this, we can reduce the time taken to retrieve the size to just O(1).\u003c/p\u003e\n\u003cp\u003eFor Q queries our worst case time complexity would be just O(Q log N).\u003c/p\u003e\n","solutions":{"cpp":"#include \u003cbits/stdc++.h\u003e\n using namespace std;\n using ll = long long;\n using uint = unsigned int;\n using ull = unsigned long long;\n\n // https://github.com/atcoder/ac-library/blob/master/atcoder/dsu.hpp\n struct DSU {\n  public:\n   DSU(int n) : _n(n + 1), parent_or_size(n + 1, -1) {}\n\n   int merge(int a, int b) {\n     assert(0 \u003c= a \u0026\u0026 a \u003c this-\u003e_n);\n     assert(0 \u003c= b \u0026\u0026 b \u003c this-\u003e_n);\n     int x = this-\u003eleader(a), y = this-\u003eleader(b);\n     if (x == y) return x;\n     if (-this-\u003eparent_or_size[x] \u003c -this-\u003eparent_or_size[y]) swap(x, y);\n     this-\u003eparent_or_size[x] += this-\u003eparent_or_size[y];\n     this-\u003eparent_or_size[y] = x;\n     return x;\n   }\n\n   int leader(int a) {\n     assert(0 \u003c= a \u0026\u0026 a \u003c _n);\n     if (this-\u003eparent_or_size[a] \u003c 0) return a;\n     return this-\u003eparent_or_size[a] = this-\u003eleader(parent_or_size[a]);\n   }\n\n   int size(int a) {\n     assert(0 \u003c= a \u0026\u0026 a \u003c _n);\n     return -this-\u003eparent_or_size[leader(a)];\n   }\n\n  private:\n   int _n;\n   vector\u003cint\u003e parent_or_size;\n };\n\n const int nax = 2e5 + 10;\n\n int main() {\n   cin.tie(0)-\u003esync_with_stdio(0);  // cout \u003c\u003c fixed \u003c\u003c setprecision(15);\n\n   int n, q, type, a, b;\n   cin \u003e\u003e n \u003e\u003e q;\n\n   DSU dsu(nax);\n\n   while (q--) {\n     cin \u003e\u003e type;\n     if (type == 1) {\n       cin \u003e\u003e a \u003e\u003e b;\n       dsu.merge(a, b);\n     }\n     else {\n       cin \u003e\u003e a;\n       cout \u003c\u003c dsu.size(a) \u003c\u003c \"\\n\";\n     }\n   }\n\n   return 0;\n }\n"},"problemData":{"id":"CNCTS","title":"Kingdom Cities","difficulty":"hard","problem_url":"https://www.hackerrank.com/contests/alcoding-september-challenge/challenges/kingdom-cities"}}},"__N_SSG":true},"page":"/problems/[id]","query":{"id":"CNCTS"},"buildId":"dqTseh2O4_ERidQbP0zPr","assetPrefix":"/editorials","nextExport":false,"isFallback":false,"gsp":true,"head":[["meta",{"name":"viewport","content":"width=device-width"}],["meta",{"charSet":"utf-8"}],["title",{"children":"Alcoding Club | Editorials"}],["link",{"rel":"stylesheet","href":"https://bootswatch.com/4/lux/bootstrap.min.css"}],["link",{"rel":"shortcut icon","href":"/favicon.ico"}]]}</script><script nomodule="" src="/editorials/_next/static/chunks/polyfills-57d8738e7416f8423303.js"></script><script src="/editorials/_next/static/chunks/main-79d6d556cd81f503698e.js" async=""></script><script src="/editorials/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/editorials/_next/static/chunks/framework.cb05d56be993eb6b088a.js" async=""></script><script src="/editorials/_next/static/chunks/3ef630e34cd10ba68f9d468ac363ff81c534e1e9.433bb325642694f7dbf6.js" async=""></script><script src="/editorials/_next/static/chunks/pages/_app-20fc78410fa93af4c468.js" async=""></script><script src="/editorials/_next/static/chunks/pages/problems/%5Bid%5D-2c981d2814853e706423.js" async=""></script><script src="/editorials/_next/static/dqTseh2O4_ERidQbP0zPr/_buildManifest.js" async=""></script><script src="/editorials/_next/static/dqTseh2O4_ERidQbP0zPr/_ssgManifest.js" async=""></script></body></html>