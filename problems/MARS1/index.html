<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Alcoding Club | Editorials</title><link rel="stylesheet" href="https://bootswatch.com/4/lux/bootstrap.min.css"/><link rel="shortcut icon" href="/favicon.ico"/><link rel="preload" href="/editorials/_next/static/css/5b392630e742cc857810.css" as="style"/><link rel="stylesheet" href="/editorials/_next/static/css/5b392630e742cc857810.css" data-n-g=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/editorials/_next/static/chunks/main-79d6d556cd81f503698e.js" as="script"/><link rel="preload" href="/editorials/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/editorials/_next/static/chunks/framework.cb05d56be993eb6b088a.js" as="script"/><link rel="preload" href="/editorials/_next/static/chunks/3ef630e34cd10ba68f9d468ac363ff81c534e1e9.433bb325642694f7dbf6.js" as="script"/><link rel="preload" href="/editorials/_next/static/chunks/pages/_app-20fc78410fa93af4c468.js" as="script"/><link rel="preload" href="/editorials/_next/static/chunks/pages/problems/%5Bid%5D-2c981d2814853e706423.js" as="script"/></head><body><div id="__next"><div><nav class="navbar navbar-expand-lg navbar-light bg-light"><a class="nav-link" href="/editorials/"><img src="/editorials/logo.jpg" width="80" height="70" alt="the alcoding club logo"/></a><a class="navbar-brand" href="#">Editorials</a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor03" aria-controls="navbarColor03" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarColor03"><ul class="navbar-nav mr-auto"><li class="nav-item active"><a class="nav-link" href="/editorials/">Home <span class="sr-only">(current)</span></a></li></ul></div></nav><div class="container"><button type="button" class="btn btn-link editorial-link"><a href="https://www.hackerrank.com/contests/alcoding-summer-challenge/challenges/mars1" target="_blank">View Problem</a></button><div class="jumbotron"><div><h1>Basic Idea</h1>
<p>Given the constraints, it is clear that this mapping can be represented as a tree and the problem then becomes the LCA problem.</p>
<h1>Explanation</h1>
<p>Maintain a graph in the form of an adjacency list. Once you have stored the graph.
Do a single bfs on the graph, in each step store the depth, parent, and distance from parent of each station and mark this station as visited.
After this, calculate the LCA for A and B in each query by traversing backwards
towards the parents of A and B till both the nodes are the same.
After this, starting from A increase the values of distance by the distance between the node
and the next node in the path and everytime a normal station is encountered, reset distance to zero
and add the 2 ^ (current distance) to the original cost.
Repeat this till we reach station B.</p>
</div></div><ul class="nav nav-tabs"><li class="nav-item"><a class="nav-link " data-toggle="tab">Python</a></li></ul><pre style="display:block;overflow-x:auto;padding:0.5em;background:#F0F0F0;color:#444"><code style="float:left;padding-right:10px"><span class="react-syntax-highlighter-line-number">1
</span></code><code></code></pre></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"editorialData":{"editorial":"\u003ch1\u003eBasic Idea\u003c/h1\u003e\n\u003cp\u003eGiven the constraints, it is clear that this mapping can be represented as a tree and the problem then becomes the LCA problem.\u003c/p\u003e\n\u003ch1\u003eExplanation\u003c/h1\u003e\n\u003cp\u003eMaintain a graph in the form of an adjacency list. Once you have stored the graph.\nDo a single bfs on the graph, in each step store the depth, parent, and distance from parent of each station and mark this station as visited.\nAfter this, calculate the LCA for A and B in each query by traversing backwards\ntowards the parents of A and B till both the nodes are the same.\nAfter this, starting from A increase the values of distance by the distance between the node\nand the next node in the path and everytime a normal station is encountered, reset distance to zero\nand add the 2 ^ (current distance) to the original cost.\nRepeat this till we reach station B.\u003c/p\u003e\n","solutions":{"py":"typeOfStation = []\ngraph = []\ndepth = []\nvisited = []\nparent = []\ndistanceFromParent = []\n\ndef findPath(a, b):\n\n    global depth, parent, visited, distanceFromParent\n\n    pathA = [a]\n    pathB = [b]\n\n    while (a != b):\n        if depth[a] \u003e depth[b]:\n            pathA.append(parent[a])\n            a = parent[a]\n\n        elif depth[b] \u003e depth[a]:\n            pathB.append(parent[b])\n            b = parent[b]\n\n        else:\n            pathA.append(parent[a])\n            pathB.append(parent[b])\n            a = parent[a]\n            b = parent[b]\n\n    pathB = pathB[::-1]\n\n    return (pathA + pathB[1:], a)\n    \n\ndef bfs(root):\n\n    global depth, parent, visited, distanceFromParent\n\n    depth[root] = 0\n    parent[root] = -1\n    visited[root] = 1\n    distanceFromParent[root] = 0\n\n    queue = [root]\n\n    while queue:\n        s = queue.pop()\n\n        for node in graph[s]:\n            neighbour = node[0]\n            if visited[neighbour] == 0:\n                visited[neighbour] = 1\n                queue.append(neighbour)\n                depth[neighbour] = depth[s] + 1\n                parent[neighbour] = s\n                distanceFromParent[neighbour] = node[1]\n    \n\ndef calculate(path, lca):\n\n    global depth, parent, visited, distanceFromParent\n\n    cost = 0\n    distance = 0\n\n    a = path[0]\n    b = path[-1]\n\n    if a == b:\n        return 0\n\n    check = (a != lca)\n\n    while check:\n\n        if (typeOfStation[a] and distance \u003e 0):\n            cost += 2 ** (distance)\n            distance = 0\n        \n        if a == lca:\n            check  = 0\n        else:\n            distance += distanceFromParent[a]\n            a = parent[a]\n\n    check = (a != lca)\n\n    while b != lca:\n\n        if (typeOfStation[b] and distance \u003e 0):\n            cost += 2 ** (distance)\n            distance = 0\n\n        if b == lca:\n            check = 0\n        else:\n            distance += distanceFromParent[b]\n            b = parent[b]\n\n    if distance:\n        cost += 2 ** distance\n\n    return cost\n\nfor _ in range(int(input())):\n\n    graph = []\n    depth = []\n    visited = []\n    parent = []\n    typeOfStation = []\n    distanceFromParent = []\n\n    n, q, c = list(map(int, input().split(' ')))\n    typeOfStation = list(map(int, input().split(' ')))\n\n    graph = [[] for i in range(n)]\n\n    for i in range(n-1):\n        u, v, d = list(map(int, input().split(' ')))\n        graph[u-1].append([v-1, d])\n        graph[v-1].append([u-1, d])\n\n    depth = [-1 for i in range(n)]\n    visited = [0 for i in range(n)]\n    parent = [-1 for i in range(n)]\n    distanceFromParent = [0 for i in range(n)]\n\n    bfs(c - 1)\n\n    for i in range(q):\n        a, b = list(map(int, input().split(' ')))\n        path, lca = findPath(a-1, b-1)\n        ans = calculate(path, lca)\n        print(ans)"},"problemData":{"id":"MARS1","title":"Man Vs. Mars","difficulty":"hard","problem_url":"https://www.hackerrank.com/contests/alcoding-summer-challenge/challenges/mars1"}}},"__N_SSG":true},"page":"/problems/[id]","query":{"id":"MARS1"},"buildId":"94TKz0qrnApQ8QsWloy59","assetPrefix":"/editorials","nextExport":false,"isFallback":false,"gsp":true,"head":[["meta",{"name":"viewport","content":"width=device-width"}],["meta",{"charSet":"utf-8"}],["title",{"children":"Alcoding Club | Editorials"}],["link",{"rel":"stylesheet","href":"https://bootswatch.com/4/lux/bootstrap.min.css"}],["link",{"rel":"shortcut icon","href":"/favicon.ico"}]]}</script><script nomodule="" src="/editorials/_next/static/chunks/polyfills-57d8738e7416f8423303.js"></script><script src="/editorials/_next/static/chunks/main-79d6d556cd81f503698e.js" async=""></script><script src="/editorials/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/editorials/_next/static/chunks/framework.cb05d56be993eb6b088a.js" async=""></script><script src="/editorials/_next/static/chunks/3ef630e34cd10ba68f9d468ac363ff81c534e1e9.433bb325642694f7dbf6.js" async=""></script><script src="/editorials/_next/static/chunks/pages/_app-20fc78410fa93af4c468.js" async=""></script><script src="/editorials/_next/static/chunks/pages/problems/%5Bid%5D-2c981d2814853e706423.js" async=""></script><script src="/editorials/_next/static/94TKz0qrnApQ8QsWloy59/_buildManifest.js" async=""></script><script src="/editorials/_next/static/94TKz0qrnApQ8QsWloy59/_ssgManifest.js" async=""></script></body></html>